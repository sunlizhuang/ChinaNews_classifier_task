Nationwide protests in Iran escalated over the accidental shooting down of a Ukrainian passenger plane, that killed all 176 people on board.

Earlier, Iran’s president Hassan Rouhani said an investigation into the tragedy had found “missiles fired due to human error” brought down the plane, and called it an “unforgivable mistake”.

Violence erupted in Tehran’s Azadi Square, with police using tear gas at protesters who called for the responsible to be prosecuted, as well as for supreme leader Ayatollah Ali Khamenei to step down.

Videos showed up on social media with people shouting: “Death to the dictator”, and “Khamenei have shame. Leave the country”.

Adding to the chaos, Iranian authorities detained and later released Britain’s ambassador, Rob Macaire. He said he was detained for half an hour on 11 January after attending a protest in Tehran. Iran’s media said that he had been arrested “for taking part in the protest”. Under the 1961 Vienna Convention on Diplomatic Relations, ambassadors have diplomatic immunity.

The British foreign secretary Dominic Raab called the move a violation of international law: “The Iranian government is at a cross-roads moment. It can continue its march towards pariah status with all the political and economic isolation that entails, or take steps to deescalate tensions and engage in a diplomatic path forwards”, he said.

The EU’s foreign affairs chief Josep Borrell also warned Iran: “Full respect of the Vienna convention is a must. The EU calls for de-escalation and space for diplomacy”.

Protests in sympathy to the victims were also held in front of the German Federal Foreign Office in Berlin. German chancellor Angela Merkel and British prime minister Boris Johnson spoke of Macaire’s arrest, and later issued a statement by a spokesperson:

“On Iran, they discussed the tragic loss of life on the Ukraine International Airlines passenger jet. They condemned Iran’s arrest of the UK Ambassador to Tehran as a violation of international law,” the spokesman said, and added: “The leaders also discussed our shared interests in ensuring Iran never acquires a nuclear weapon, and reaffirmed their continued commitment to preserving the JCPOA (Iran nuclear deal)”.

Amidst rising tensions with the US, Iran said it would abandon the 2015 nuclear deal, that the country signed together with the US, France, Germany, the UK, Russia and China, but US president Donald Trump abandoned it in 2018.

The leaders of France, Germany and the UK, in joint statement urged Iran to “return to full compliance with its commitments” under the deal.